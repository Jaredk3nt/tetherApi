webpackJsonp([1],{0:function(t,e){},"6/GH":function(t,e){},BkU9:function(t,e){},DKU4:function(t,e){},DN5O:function(t,e){},E9IR:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),s=n("8+8L"),i=n("K/Lq"),r=n.n(i),a=n("/ocq"),c={name:"story",props:["story"],components:{},methods:{goToStory:function(){console.log(this.story),this.$router.push({name:"Story",params:{user:this.story.author,story_id:this.story._id,story:this.story}})},spawnChild:function(){this.$router.push({name:"write",params:{parent:this.story._id}})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-container"},[n("div",{staticClass:"story-container",on:{click:t.goToStory}},[n("div",{staticClass:"author"},[t._v(t._s(t.story.author))]),t._v(" "),n("p",[t._v(t._s(t.story.body))])]),t._v(" "),n("div",{staticClass:"story-actions"},[n("div",{staticClass:"action fav"},[n("div",{staticClass:"heart icon"}),n("p",[t._v(t._s(t.story.likes))])]),t._v(" "),n("div",{staticClass:"action tether",on:{click:t.spawnChild}},[n("div",{staticClass:"link icon"}),n("p",[t._v(t._s(t.story.children.length))])])])])},staticRenderFns:[]};var u=n("VU/8")(c,l,!1,function(t){n("Rljj")},"data-v-7449183b",null).exports,p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.route?n("router-link",{staticClass:"nav-button",attrs:{to:{name:t.route}}},[n("div",{staticClass:"title"},[t._v(t._s(t.title))])]):n("div",{staticClass:"nav-button",on:{click:function(e){t.$emit("clicked")}}},[n("div",{staticClass:"title"},[t._v(t._s(t.title))])])],1)},staticRenderFns:[]};var d=n("VU/8")({name:"nav-button",props:["title","route"],methods:{dispatch:function(){this.$store.dispatch("test")}}},p,!1,function(t){n("YzG6")},null,null).exports,h={name:"nav-bar",components:{NavButton:d},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn}},methods:{login:function(){this.$router.push("login")},goToProfile:function(){this.$router.push("/"+this.$store.getters.user)}}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav-container"},[e("div",{staticClass:"nav-title"},[this._v("tethered")]),this._v(" "),e("div",{staticClass:"nav-actions"},[e("nav-button",{attrs:{title:"Read",route:"Home"}}),this._v(" "),e("nav-button",{attrs:{title:"Write",route:"write"}}),this._v(" "),this.isLoggedIn?e("nav-button",{attrs:{title:"Profile"},on:{clicked:this.goToProfile}}):e("nav-button",{attrs:{title:"Login"},on:{clicked:this.login}})],1)])},staticRenderFns:[]};var m=n("VU/8")(h,v,!1,function(t){n("BkU9")},null,null).exports,f={name:"Home",data:function(){return{stories:[]}},methods:{fetchStories:function(){var t=this;this.$http.get("https://tetherapi.herokuapp.com/stories").then(function(e){console.log(e.body),t.stories=e.body},function(t){console.log("on no error")})}},mounted:function(){this.fetchStories()},components:{Story:u,NavBar:m}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-body"},[e("router-view"),this._v(" "),e("div",{staticClass:"homepage"},[e("div",{staticClass:"story-list"},this._l(this.stories,function(t){return e("story",{key:t._id,attrs:{story:t}})}))]),this._v(" "),e("nav-bar")],1)},staticRenderFns:[]};var _=n("VU/8")(f,g,!1,function(t){n("Tz2V")},"data-v-2ca78796",null).exports,y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"back-button",on:{click:this.back}},[this._v("Back")])])},staticRenderFns:[]};var C=n("VU/8")({name:"toolbar",methods:{back:function(){this.$router.go(-1)}}},y,!1,function(t){n("E9IR")},"data-v-379a0746",null).exports,k={name:"login",components:{Toolbar:C},data:function(){return{hasAccount:!0,username:"",password:"",email:"",password2:""}},methods:{back:function(){this.$router.go(-1)},toggleSignOn:function(){this.hasAccount=!this.hasAccount},login:function(){var t=this;this.$store.dispatch("login",{username:this.username,password:this.password}).then(function(e){t.$router.go(-1)},function(t){console.log("got error"),console.log(t)})},signup:function(){var t=this;this.password===this.password2?this.$store.dispatch("createUser",{email:this.email,username:this.username,password:this.password}).then(function(e){t.$router.go(-1)},function(t){console.log(t)}):console.log("Passwords do not match")}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-page"},[n("h1",[t._v("tethered")]),t._v(" "),n("div",{staticClass:"login-field"},[t.hasAccount?n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"Password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.login}},[t._v("Login")])]):n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{placeholder:"Email Address",type:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{placeholder:"Password",type:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],attrs:{placeholder:"Re-type password",type:"password"},domProps:{value:t.password2},on:{input:function(e){e.target.composing||(t.password2=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.signup}},[t._v("Sign up now")])])]),t._v(" "),t.hasAccount?n("div",{staticClass:"link-text"},[n("p",{on:{click:t.toggleSignOn}},[t._v("New here? Create an account")])]):n("div",{staticClass:"link-text"},[n("p",{on:{click:t.toggleSignOn}},[t._v("Already have an account? Log in here")])]),t._v(" "),n("div",{staticClass:"link-text"},[n("p",{on:{click:t.back}},[t._v("Maybe later, I just want to read.")])])])},staticRenderFns:[]};var b=n("VU/8")(k,w,!1,function(t){n("oIwV")},"data-v-1827ccd9",null).exports,S={name:"story-view",props:["username","story_id","story"],components:{Story:u,Toolbar:C},data:function(){return{children:[]}},mounted:function(){void 0===this.story&&this.getStory(this.story_id),this.getChildren(this.story_id)},beforeRouteUpdate:function(t,e,n){this.children=[],this.getStory(t.params.story_id),this.getChildren(t.params.story_id),n()},methods:{getStory:function(t){var e=this;this.$http.get("https://tetherapi.herokuapp.com/stories/"+t).then(function(t){console.log(t.body),e.story=t.body},function(t){console.log(t)})},getChildren:function(t){var e=this;this.$http.get("https://tetherapi.herokuapp.com/children/"+t).then(function(t){console.log(t.body),e.children=t.body},function(t){console.log(t)})}}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"outer-container"},[e("div",{staticClass:"inner-container"},[e("toolbar"),this._v(" "),e("div",{staticClass:"story-card-container"},[e("story",{attrs:{story:this.story}})],1),this._v(" "),e("div",{staticClass:"children-container"},this._l(this.children,function(t){return e("story",{key:t._id,attrs:{story:t}})}))],1)])},staticRenderFns:[]};var O=n("VU/8")(S,$,!1,function(t){n("DN5O")},null,null).exports,L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("p",[this._v(this._s(this.title))]),this._v(" "),e("h3",[this._v(this._s(this.value))])])},staticRenderFns:[]};var U={name:"profile",computed:{numFollowers:function(){return 1},numStories:function(){return 1},numLikes:function(){return 1}},methods:{getUserData:function(){}},components:{titleNumber:n("VU/8")({name:"title-number",props:["title","value"]},L,!1,function(t){n("kS1+")},"data-v-267d26a3",null).exports}},I={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"profile-card-container"},[t._m(0),t._v(" "),n("div",{staticClass:"profile-stats"},[n("title-number",{attrs:{title:"Followers",value:t.numFollowers}}),t._v(" "),n("title-number",{attrs:{title:"Stories",value:t.numStories}}),t._v(" "),n("title-number",{attrs:{title:"Likes",value:t.numLikes}})],1)]),t._v(" "),n("div",{staticClass:"story-list"},t._l(t.stories,function(t){return n("story",{key:t.body,attrs:{story:t}})}))])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"profile-header"},[e("div",{staticClass:"profile-img"},[e("img")])])}]};var N=n("VU/8")(U,I,!1,function(t){n("UOc2")},null,null).exports,x={name:"post",props:["parent"],data:function(){return{story:"",parentOpen:!1,parentStories:""}},mounted:function(){console.log(this.parent),void 0!==parent&&""!==parent&&this.fetchParent()},methods:{postStory:function(){this.$store.dispatch("post",{story:this.story,parent:this.parent}),this.$router.back()},backButton:function(){this.$router.back()},toggleParent:function(){this.parentOpen=!this.parentOpen},fetchParent:function(){var t=this;this.$http.get("https://tetherapi.herokuapp.com/parents/"+this.parent).then(function(e){t.parentStories=e.body},function(t){console.log("on no error")})}}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"desktop-container"},[n("div",{staticClass:"container",class:{open:t.parentOpen}},[n("div",{staticClass:"parent",class:{"parent-open":t.parentOpen}},t._l(t.parentStories,function(e){return n("div",{key:e._id},[n("div",{staticClass:"author"},[t._v(t._s(e.author))]),t._v(" "),n("p",[t._v(t._s(e.body))])])})),t._v(" "),n("div",{staticClass:"top-bar",class:{grey:t.parentOpen}},[t.parentOpen?t._e():n("div",{staticClass:"back-button",class:{grey:void 0===t.parent},on:{click:t.backButton}},[n("p",[t._v("Back")])]),t._v(" "),void 0!==t.parent&&""!==t.parent?n("div",{staticClass:"parent-button",on:{click:t.toggleParent}},[t.parentOpen?n("p",[t._v("Hide parent story")]):n("p",[t._v("View parent story")])]):t._e()]),t._v(" "),n("div",{staticClass:"post-container"},[n("div",{staticClass:"text-container"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.story,expression:"story"}],attrs:{"max-length":"600",placeholder:"Write a story!"},domProps:{value:t.story},on:{input:function(e){e.target.composing||(t.story=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"bottom-bar"},[n("p",[t._v(t._s(t.story.length)+" / 600")]),t._v(" "),n("button",{staticClass:"text-button",on:{click:t.postStory}},[t._v("POST")])])])])])},staticRenderFns:[]};var E=n("VU/8")(x,P,!1,function(t){n("DKU4")},"data-v-44eef155",null).exports;o.a.use(a.a);var R=new a.a({mode:"history",routes:[{path:"/",name:"Home",component:_,children:[{path:"/write",component:E,name:"write",props:!0}]},{path:"/login",name:"Login",component:b},{path:"/:user/:story_id",name:"Story",component:O,props:!0},{path:"/:user",name:"Profile",component:N}]}),T=n("//Fk"),V=n.n(T),F=n("NYxO");o.a.use(F.a);var G="https://tetherapi.herokuapp.com/",A={post:function(t,e){var n=t.commit;t.getters;return new V.a(function(t){o.a.http.post(G+"stories",{body:e.story,parent:e.parent}).then(function(o){console.log("posted: "+e.story),n("POST"),t()},function(t){console.log(t)})})},login:function(t,e){var n=t.commit;return n("LOGIN"),new V.a(function(t){o.a.http.post(G+"login",e).then(function(e){console.log(e),n("LOGIN_SUCCESS",{userid:e.body._id}),t()},function(t){console.log("on no error")})})},logout:function(t){var e=t.commit;localStorage.removeItem("token"),e(LOGOUT)},createUser:function(t,e){var n=t.commit;return n("LOGIN"),console.log(e),new V.a(function(t,e){o.a.http.post(G+"users",e).then(function(e){n("LOGIN_SUCCESS"),console.log("oh yeah, login"),t(e)},function(t){console.log("on no error")})})},checkCookies:function(t){var e=t.commit,n=o.a.cookie.get("auth_token");console.log(n),n&&e("PERSISTENT_LOGIN")}},B=new F.a.Store({state:{isLoggedIn:!1,userid:""},getters:{isPendingLogin:function(t){return t.pending},isLoggedIn:function(t){return t.isLoggedIn},user:function(t){return t.userid}},mutations:{POST:function(t){t.isWriting=!1},LOGIN:function(t){t.pending=!0},LOGIN_SUCCESS:function(t,e){t.isLoggedIn=!0,t.pending=!1,t.userid=e.userid},PERSISTENT_LOGIN:function(t){t.isLoggedIn=!0},LOGOUT:function(t){t.isLoggedIn=!1}},actions:A}),H={name:"App",components:{Post:E},computed:{postOpen:function(){return this.$store.getters.isWriting},loggingIn:function(){return this.$store.getters.isLoggingIn}},mounted:function(){this.$store.dispatch("checkCookies")}},j={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var D=n("VU/8")(H,j,!1,function(t){n("6/GH")},null,null).exports;o.a.use(s.a),o.a.http.options.credentials=!0,o.a.use(r.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:R,store:B,components:{App:D,Home:_,NavButton:d},template:"<App/>"})},Rljj:function(t,e){},Tz2V:function(t,e){},UOc2:function(t,e){},YzG6:function(t,e){},"kS1+":function(t,e){},oIwV:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1773f59158fd5e05e08b.js.map